{% extends 'base.html.twig' %}

{% block title %} Category {% endblock %}
{% block stylesheets %}
    {{ parent() }}
{% endblock %}
{% block pathinfo %}{{ navigation.getCurrentUrl() }}{% endblock %}
{% block body %}
    <section class="box info">
        <div class="product-grid-view">
            <div class="row">
                {% for product in products %}
                    {% set imagedefault = 0 %}
                    {% set countimagedefault = 0 %}
                    {% for image in product.images if image.isdefault and image.size.name == 'image500' and countimagedefault == 0 %}
                        {% set imagedefault = 1 %}
                        {% set countimagedefault = 1 %}
                        <div class="col-sm-4 col-xs-12 item">
                            <div class="item-inner">
                                <div class="images-container">
                                    <a href="{{ path('product_detail', {'id': product.urlKey}) }}" class="product-image">
                                        {% for description in product.descriptions if common.getLanguage() == description.lang %}
                                            <img src="/{{ image.size.path }}{{ image.name }}" title="{{ description.name }}" class="img-responsive"/>
                                        {% endfor %}
                                    </a>
                                </div>
                                <div class="des-container">
                                    <h2 class="product-name">
                                        {% for description in product.descriptions if common.getLanguage() == description.lang %}
                                            <a href="{{ path('product_detail', {'id': product.urlKey}) }}" title="{{ description.name }}">{{ description.name }}</a>
                                        {% endfor %}

                                    </h2>
                                    {% for price in product.prices %}
                                        <div class="price-box">
                                            <span id="product-price-32" class="regular-price">
                                                <span class="price">CHF {{ price.value | number_format(2) }}</span>
                                                <span class="price-text"> / {{ price.calendarTyp.name | trans }}</span>
                                            </span>
                                        </div>
                                    {% endfor %}
                                    <div class="ma-desc"> </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    {% if imagedefault == 0 %}

                        <div class="col-sm-4 col-xs-12 item">
                            <div class="item-inner">
                                <div class="images-container">
                                    {% for description in product.descriptions if common.getLanguage() == description.lang %}
                                        <a href="{{ path('product_detail', {'id': product.urlKey}) }}" class="product-image">
                                            <img src="/media/placeholder/placeholder500.jpg" title="{{ description.name }}" class="img-responsive"/>
                                        </a>
                                    {% endfor %}
                                </div>
                                <div class="des-container">
                                    <h2 class="product-name">
                                        {% for description in product.descriptions if common.getLanguage() == description.lang %}
                                            <a href="{{ path('product_detail', {'id': product.urlKey}) }}" title="{{ description.name }}">{{ description.name }}</a>
                                        {% endfor %}
                                    </h2>
                                    {% for price in product.prices %}
                                        <div class="price-box">
                                            <span id="product-price-32" class="regular-price">
                                                <span class="price">CHF {{ price.value | number_format(2) }}</span>
                                                <span class="price-text"> / {{ price.calendarTyp.name | trans }}</span>
                                            </span>
                                        </div>
                                    {% endfor %}
                                    <div class="ma-desc"> </div>
                                </div>
                            </div>
                        </div>

                    {% endif %}
                {% endfor %}


            </div>
        </div>
    </section>
{% endblock %}

