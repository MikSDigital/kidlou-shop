<?php

namespace App\Repository;

/**
 * Gift
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class Gift extends \Doctrine\ORM\EntityRepository {

    public function getCoupon() {
        return $this->createQueryBuilder('ca')
                        ->addSelect('co')
                        ->innerJoin('ca.contents', 'co')
                        ->where('ca.id = (:category) AND ca.status = 1')
                        ->setParameter('category', $id)
                        ->orderBy('co.created_at', 'DESC')
                        ->getQuery()
                        ->getOneOrNullResult();
    }

}
